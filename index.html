<html lang="en" ng-app="AppModule">
    <head>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.css">
    
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.8.3/angular-material.min.js"></script>
        <script src="https://cdn.jsdelivr.net/angular-material-icons/0.4.0/angular-material-icons.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.14/angular-cookies.js"></script>
        <script src="https://rawgithub.com/gsklee/ngStorage/master/ngStorage.js"></script>
    
        <script src="js/todo.js"></script> 
        <script src="js/configApplication.js"></script>
        <script src="js/factories.js"></script>

        <link rel="stylesheet" href="css/style.css"> 
    </head>

    <body layout="row" ng-controller="AppCtrl">
        <md-sidenav layout="column" class="md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="$mdMedia('gt-md')">
            <md-item-content>
                <div class="md-tile-left inset" hide-sm>
                    <div class="img_borber">
                        <user-avatar><img ng-src="{{ user.image_url }}"></user-avatar>
                    </div>
                </div>
                <div class="md-tile-content">
                    <h3>{{ user.username }}</h3>
                </div>
            </md-item-content>

            <md-menu-bar>
                <md-menu>
                    <md-button class="navButton" layout="row" ng-repeat="section in menu" >
                        {{section.Project.title}} {{section.Project.task_count}} ( id - {{section.Project.id}} )
                    </md-button>
                </md-menu>
            </md-menu-bar>
        </md-sidenav>


        <div layout="column" class="relative" layout-fill role="main">
            <md-button class="md-fab md-fab-bottom-right" aria-label="Add" ng-click="showAdd($event)">
                <ng-md-icon icon="add"></ng-md-icon>
            </md-button>

            <md-toolbar ng-show="!showSearch" class="md-default-theme-grey">
                <div class="md-toolbar-tools">
                    <md-button ng-click="toggleSidenav('left')" hide-gt-md aria-label="Menu">
                        <ng-md-icon icon="menu"></ng-md-icon>
                    </md-button>

                    <md-button aria-label="Search" class="md-default-theme-grey" ng-click="showSearch = !showSearch">
                        <ng-md-icon icon="search"></ng-md-icon>
                    </md-button>

                    <span flex></span>
                    
                    <md-button aria-label="Open Settings" ng-click="showListBottomSheet($event)">
                        <ng-md-icon icon="more_vert"></ng-md-icon>
                    </md-button>
                </div>
            </md-toolbar>

            <md-toolbar class="md-hue-1 md-default-theme-grey" ng-show="showSearch">
                <div class="md-toolbar-tools">
                    <md-button ng-click="showSearch = !showSearch" aria-label="Back">
                        <ng-md-icon icon="arrow_back"></ng-md-icon>
                    </md-button>
                    
                    <h3 flex="10">Back</h3>

                    <md-input-container md-theme="input" flex>
                        <label>&nbsp;</label>
                        <input ng-model="search.who" placeholder="enter search">
                    </md-input-container>
                    
                    <md-button aria-label="Search" ng-click="showSearch = !showSearch">
                        <ng-md-icon icon="search"></ng-md-icon>
                    </md-button>

                    <md-button aria-label="Open Settings" ng-click="showListBottomSheet($event)">
                        <ng-md-icon icon="more_vert"></ng-md-icon>
                    </md-button>
                </div>
            </md-toolbar>

            <md-content flex md-scroll-y>
                <ui-view layout="column" layout-fill layout-padding>
                    <div class="inset" hide-sm></div>
                    <div layout="row" layout-align="center center">
                        <md-card flex-gt-sm="90" flex-gt-md="80">
                            <md-card-content>
                                <md-list>
                                    <md-item ng-repeat="item in tasks | filter:search">
                                        <md-item-content>
                                            <div class="md-tile-left inset" hide-sm>
                                                <input type="radio">
                                            </div>

                                            <div class="md-tile-content">
                                                <h3>
                                                    {{item.Task.description ? item.Task.description : item.Task.title}}
                                                </h3>
                                            </div>
                                        </md-item-content>
                                        <md-divider md-inset hide-sm ng-if="!$last"></md-divider>
                                        <md-divider hide-gt-sm ng-if="!$last"></md-divider>
                                    </md-item>
                                </md-list>
                            </md-card-content>
                        </md-card>
                    </div>
                </ui-view>
            </md-content>
        </div>
    </body>
</html>